<div>
    <h2>Dash Configuration</h2>
    <p class="error">{{error}}</p>
    <p>{{loadingMessage}}</p>

    <tabset class="tab-container" ng-hide="configuration.loadingMessage">
        <tab heading="Account Settings" active="true">
            <table class="table table-striped">
                <tbody>
                    <tr data-ng-repeat="setting in configuration.settings.specialSettings" ng-include="'ConfigSetting.html'" />
                </tbody>
            </table>
        </tab>
        <tab heading="Storage Accounts">
            <table class="table table-striped">
                <tbody>
                    <tr data-ng-repeat="setting in configuration.settings.scaleOutStorage" ng-include="'ConfigSetting.html'" />
                </tbody>
            </table>
        </tab>
        <tab heading="General Settings">
            <table class="table table-striped">
                <tbody>
                    <tr data-ng-repeat="setting in configuration.settings.miscSettings" ng-include="'ConfigSetting.html'" />
                </tbody>
            </table>
        </tab>
    </tabset>
</div>
<script type="text/ng-template" id="ConfigSetting.html">
    <td class="col-sm-10">
        <label>{{setting.displayLabel}}:</label>
        <input type="text"
               ng-hide="isEditStyle(setting, 4)"
               ng-model="setting.value"
               class="form-control"
               ng-readonly="isEditStyle(setting, 11) && !setting.editing"
               ng-change="notifyChange(setting)" />
        <div class="input-group" ng-hide="!isEditStyle(setting, 4)">
            <span class="input-group-addon" id="{{'StorageAccount' + $index}}">Name</span>
            <input type="text"
                   class="form-control"
                   placeholder="Account Name"
                   aria-describedby="{{'StorageAccount' + $index}}"
                   ng-model="setting.accountName"
                   ng-readonly="isEditStyle(setting, 11) && !setting.editing"
                   ng-change="notifyChange(setting)" />
        </div>
        <div class="input-group" ng-hide="!isEditStyle(setting, 4)">
            <span class="input-group-addon" id="{{'StorageKey' + $index}}">Key</span>
            <input type="text"
                   class="form-control"
                   placeholder="Account Key"
                   aria-describedby="{{'StorageKey' + $index}}"
                   ng-model="setting.accountKey"
                   ng-readonly="isEditStyle(setting, 11) && !setting.editing"
                   ng-change="notifyChange(setting)" />
        </div>
    </td>
    <td class="col-sm-2">
        <p ng-show="isEditStyle(setting, 9) && !configuration.editingInProgress">
            <button type="button" class="btn btn-link" ng-show="isEditStyle(setting, 8)" data-ng-click="editSwitch(setting, false)">Edit</button>
            <button type="button" class="btn btn-link" ng-show="isEditStyle(setting, 1)" data-ng-click="delete(setting)">Delete</button>
        </p>
        <p ng-show="setting.editing">
            <button type="button" class="btn btn-link" data-ng-click="editSwitch(setting, false)">Save</button>
            <button type="button" class="btn btn-link" data-ng-click="editSwitch(setting, true)">Cancel</button>
        </p>
        <p ng-show="isEditStyle(setting, 2) && !configuration.editingInProgress">
            <button type="button" class="btn btn-link" data-ng-click="generateStorageKey(setting)">Generate</button>
        </p>
    </td>
</script>
